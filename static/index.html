<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LLM Demo</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif; padding: 20px; }
    textarea { width:100%; height:120px; }
    #resp { white-space: pre-wrap; margin-top:12px; border:1px solid #ddd; padding:12px; min-height:80px; }
    button { margin-top:8px; }
  </style>
</head>
<body>
  <h3>LLM Demo</h3>
  <textarea id="query" placeholder="Type your question..."></textarea>
  <br />
  <button id="send">Send</button>
  <div id="status"></div>
  <div id="resp"></div>

  <script>
    const send = document.getElementById('send');
    const q = document.getElementById('query');
    const resp = document.getElementById('resp');
    const status = document.getElementById('status');

    send.onclick = async () => {
      resp.textContent = '';
      status.textContent = 'Loading...';
      try {
        const r = await fetch('/api/ask', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ query: q.value })
        });
        if (!r.ok) throw new Error('Network error ' + r.status);
        const data = await r.json();
        // expect { answer: "..." }
        resp.textContent = data.answer ?? JSON.stringify(data);
      } catch (e) {
        resp.textContent = 'Error: ' + e.message;
      } finally {
        status.textContent = '';
      }
    };
  </script>
</body>
</html>
